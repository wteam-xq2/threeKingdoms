var Util={getRandomArray:function(t){var i=new Array,n=new Array,r=0;if(null==t||0==t.length)return i;n=t.slice(0);for(var s=0,e=n.length;e>s;s++)r=Math.floor(Math.random()*n.length),i[s]=n[r],n.splice(r,1);return i},arrayReDimensions:function(t){var i=[],n=[];if(null==t||0==t.length)return i;i=t[0].slice(0);for(var r=1,s=t.length;s>r;r++){n=t[r];for(var e=0,h=n.length;h>e;e++)i[e]=i[e].concat(n[e])}return i},Map:function(){this.keys=[],this.data={},this.put=function(t,i){null==this.data[t]&&this.keys.push(t),this.data[t]=i},this.get=function(t){return this.data[t]},this.contain=function(t){var i=this.data[t];return i?!0:!1},this.remove=function(t){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==t){this.keys.splice(i,1);break}this.data[t]=null},this.removeAll=function(){var t=this;t.each(function(i,n,r){t.remove(i)})},this.each=function(t){if("function"==typeof t)for(var i=this.keys.length,n=0;i>n;n++){var r=this.keys[n];t(r,this.data[r],n)}},this.sort=function(t,i,n){var r=SortUtils.sortByField(this.getDataArr(),i,n);this.data={},this.keys=[];for(var s=0;s<r.length;s++)this.put(r[s][t],r[s])},this.entrys=function(){for(var t=this.keys.length,i=new Array(t),n=0;t>n;n++)i[n]={key:this.keys[n],value:this.data[this.keys[n]]};return i},this.getDataArr=function(){var t=[];return this.each(function(i,n,r){t.push(n)}),t},this.isEmpty=function(){return 0==this.keys.length},this.size=function(){return this.keys.length},this.findByAppId=function(t){for(var i=this.keys.length,n=new Array,r=0;i>r;r++){var s=this.keys[r];-1!=s.indexOf(t)&&n.push(this.data[s])}return n},this.findByMsgId=function(t){for(var i=this.keys.length,n=0;i>n;n++){var r=this.keys[n];if(-1!=r.indexOf(t))return this.data[r]}},this.toString=function(){for(var t="{",i=0;i<this.keys.length;i++,t+=","){var n=this.keys[i];t+=n+"="+this.data[n]}return t+="}"}}};
function getSearchMap(){var a=null,t=null,n=null,e="",i=[],l=[];a=new Util.Map;for(var r=0,s=rule_datas.length;s>r;r++)t=rule_datas[r],null!=t.title&&null!=t.data&&(e=t.id,n={key:t.id,title:t.title,type:"detail",pid:"rule",data:t.data,icon_src:t.icon_src},a.put(e,n));for(var r=0,s=card_datas.length;s>r;r++)if(i=card_datas[r].data,null!=i&&0!=i.length)for(var d=0,o=i.length;o>d;d++)t=i[d],null!=t.title&&null!=t.data&&(e=t.id,n={key:t.id,title:t.title,type:"detail",pid:"sub-card",data:t.data,icon_src:t.icon_src},a.put(e,n));for(var r=0,s=str_datas.length;s>r;r++)if(null!=str_datas[r].array_datas&&0!=str_datas[r].array_datas.length){i=str_datas[r].array_datas;for(var d=0,o=i.length;o>d;d++)t=i[d],null!=t.title&&null!=t.data&&(e=t.id,n={key:t.id,title:t.title,type:"mult-detail",pid:"strategy",data:t.data,icon_src:t.icon_src},a.put(e,n))}for(var r=0,s=heros_array.length;s>r;r++)if(i=heros_array[r],null!=i&&0!=i.length)for(var d=0,o=i.length;o>d;d++)if(l=i[d],null!=l&&0!=l.length)for(var c=0,p=l.length;p>c;c++)t=l[c],null!=t.title&&null!=t.data&&(e=t.data,n={key:t.data,title:t.title,type:"heros-detail",pid:"heros",data:t.data,icon_src:t.icon_src},a.put(e,n));return a}var PACKAGE_AMOUNT=7,search_array=[],metro_colors=["blue","green","red","yellow","pink","purple","lime","magenta","teal","turquoise","green-sea","emerald"];$(document).ready(function(){function a(){var a=0;$("#loading").hide(),R.show(),a=R.find("div.tkd-navbar").css("height"),R.css({"padding-top":a}),T({datas:rule_datas,$target_dom:j,click_fn:l}),T({datas:card_datas,$target_dom:B,click_fn:i}),M(heros_datas,P),D({datas:str_datas,$target_dom:G,click_fn:r}),package_array=h(),p("country_shu",P),R.find("#to-person-info").on("click",_),Q.on("focus","input.input-search",b),$("#backtotop").on("click",k),O.scroll(y),K.find(".search-close").on("click",f),K.find("input").on("input",v),K.find("#search-submit").on("click",g),N.is(":visible")&&N.find("#rightDockerBtn").on("click",t),search_array=getSearchMap()}function t(){var a=$(this).parents("#rightDocker"),t=($("#rightDockerBtn"),0),e=0,i="false",l=a.find("#dockerPopover");return t=a.offset().left-l.width()-10,e=a.offset().top-l.height()/2+a.height()/2,i=a.attr("data-had-event"),l.hasClass("in")?(l.removeClass("in"),!1):(l.css({left:t+"px",top:e+"px"}),l.addClass("in"),void("true"!=i&&(a.attr("data-had-event","true"),$("html").on("click",function(a){if(!l.hasClass("in"))return!0;var t=$(a.target);return n(t,"rightDocker")?void 0:(l.removeClass("in"),!1)}))))}function n(a,t){var n=!1;return a.attr("id")===t?n=!0:a.parents("#"+t).length>0&&(n=!0),n}function e(){function a(a){for(var t="",n=0,e=a.length;e>n;n++)o=a[n],t+='<div class="thumbnail"><img class="card-img" src="'+o.img+'" alt="..."></div>',t+='<div><span class="blue">武将称号: </span><span>'+o.nickname+"</span></div>";return t}function t(a){var t="";if(null==a||0==a.length)return t;t+='<div><span class="blue">Online战功: </span></div>';for(var n=0,e=a.length;e>n;n++)o=a[n],t+="<div><span>"+o.online+"</span><span>——</span><span>"+o.content+"</span></div>";return t}function n(a){var t="";if(null==a||0==a.length)return t;t+='<div><span class="blue">武将技能: </span></div>';for(var n=0,e=a.length;e>n;n++)o=a[n],t+="<div>"+o.power+"</div>";return t}function e(a){var t="";if(null==a||0==a.length)return t;t+='<div><span class="blue">有问有答: </span></div>';for(var n=0,e=a.length;e>n;n++)o=a[n],o.q&&(t+='<div><span class="red">[Q]</span> '+o.q+"</div>"),o.a&&(t+='<div><span class="red">[A]</span> '+o.a+"</div>"),o.example&&(t+='<div><span class="red">例如 </span> '+o.example+"</div>");return t}function i(a){var t="";if(null==a||0==a.length)return t;t+='<div><span class="blue">身份局攻略: </span></div>';for(var n=0,e=a.length;e>n;n++)o=a[n],t+="<div>"+o.p+"</div>";return t}var l=$(this),r=null,d=null,o=null,c=[],p=[],u=["name","online","power","q","p"],h="",f="",v="",g="",m="";if(f=l.data("item-data"),c=heros_detail[f],null==c||0==c.length)return!1;if(v=l.parents("div.item-list").attr("id"),g=v+"-detail",r=$("#"+g),d=l.parents("div.main-panel"),s(r),m='<div class="panel panel-warning"><div class="panel-heading content-heading"></div><div class="sub-content panel-body"></div></div>',r.append(m),r.find("div.panel-heading").html("武将牌*"+l.attr("title")),m="",c.length!=u.length)return m="数组长度不统一, 加载页面失败！",r.find("div.panel-body").append(m),w(r,d),!1;for(var _=0,b=c.length;b>_;_++)switch(p=c[_],h=u[_]){case"name":m+=a(p);break;case"online":m+=t(p);break;case"power":m+=n(p);break;case"q":m+=e(p);break;case"p":m+=i(p)}r.find("div.panel-body").append(m),w(r,d),k()}function i(){var a=$(this);if($detail_panel=null,$main=null,_data_item=null,_datas=[],_parent_id="",_detail_id="",_html="",_color="",_color_index=0,_block_name="",_colors_len=metro_colors.length,_random_colors=Util.getRandomArray(metro_colors),_parent_id=a.parents("div.item-list").attr("id"),_detail_id=_parent_id+"-types",$detail_panel=$("#"+_detail_id),$main=a.parents("div.main-panel"),"card_heros"===a.attr("id"))return $main.find("ul.nav-tabs").find("#menu-heros > a").trigger("click"),!0;if(_datas=a.data("item-data"),null==_datas||0==_datas.length)return!1;s($detail_panel),_html='<div class="row sub-page item-list" id="sub-card">';for(var t=0,n=_datas.length;n>t;t++)_data_item=_datas[t],_color=_random_colors[_color_index],_block_name=_color,_color_index++,_color_index>_colors_len-1&&(_color_index=0),_data_item.title&&(_block_name=_data_item.title),_html+='<div class="col-sm-6 col-md-3"><div id="'+_data_item.id+'" class="thumbnail tile tile-medium tile-'+_color+' col-md-3"><a href="#"><h1>'+_block_name+"</h1></a></div></div>";_html+="</div>",$detail_panel.append(_html),$detail_panel.find("div.sub-page").find("div.tile-medium").each(function(a){var t=$(this),n=_datas[a].data;n&&(t.data("item-data",n),t.on("click",l))}),w($detail_panel,$main)}function l(){var a=$(this),t=null,n=null,e=null,i=[],l="",r="",d="",o=null,c="";if(i=a.data("item-data"),null==i||0==i.length)return!1;l=a.parents("div.item-list").attr("id"),r=l+"-detail",t=$("#"+r),n=a.parents("div.main-panel"),s(t),d='<div class="panel panel-warning"><div class="panel-heading content-heading"></div><div class="sub-content panel-body"></div></div>',t.append(d),d="";for(var p=0,u=i.length;u>p;p++)o=i[p],c=o.p,0!=p?o.img?d+="sub-card"===l?'<div class="thumbnail"><img class="card-img" src="'+o.img+'" alt="..."></div>':'<div class="thumbnail"><img src="'+o.img+'" alt="..."></div>':o.id?d+='<div id="'+o.id+'">'+o.p+"</div>":-1!=c.indexOf("[A]")?(c=c.replace("[A]",""),d+='<div><span class="red">[A]</span> '+c+"</div>"):-1!=c.indexOf("[Q]")?(c=c.replace("[Q]",""),d+='<div><span class="red">[Q]</span> '+c+"</div>"):d+="<div>"+c+"</div>":t.find("div.panel-heading").html(o.p);t.find("div.panel-body").append(d),w(t,n),e=t.find("#"+a.attr("id")),e.length>0&&setTimeout(function(){var a=e.offset().top;a-=t.find("div.sub-navbar").height(),window.scrollTo(0,a)},1e3)}function r(){function a(){var a=$(this);return a.hasClass("disabled")?!1:(a.hasClass("previous")?u--:u++,n(u),k(),!1)}function t(){var a=($(this),i.find("#content-pager"));a.is(":visible")?a.hide():a.show()}function n(t){var n=[],e=[],l="",s=d.length;if(n=d[t],0>t||t>=s)return!1;r.empty();for(var o=0,c=n.length;c>o;o++)e=n[o],l+=e.img?'<div class="thumbnail"><img src="'+e.img+'" alt="..."></div>':"<div>"+e.p+"</div>";r.append(l),i.find("#content-pager").length>0&&i.find("#content-pager").remove(),l='<ul id="content-pager" class="pager content-pager"><li class="previous"><a href="javascript:void(0);">&laquo;上一页</a></li><li class="next"><a href="javascript:void(0);">下一页&raquo;</a></li></ul> ',i.append(l),i.find("#content-pager > li").on("click",a),l="(第"+(t+1)+"页  共"+s+"页)",r.prev("div.panel-heading").find("span.pager-tips").html(l),0===t&&i.find("#content-pager>li.previous").addClass("disabled"),t===d.length-1&&i.find("#content-pager>li.next").addClass("disabled")}var e=$(this),i=null,l=null,r=null,d=[],o="",c="",p="",u=0;return d=e.data("item-data"),null==d||0==d.length?!1:(o=e.parents("div.item-list").attr("id"),c=o+"-detail",i=$("#"+c),l=e.parents("div.main-panel"),s(i),p='<div class="panel panel-warning"><div class="panel-heading content-heading"></div><div class="sub-content panel-body"></div></div>',i.append(p),r=i.find("div.panel-body"),p="<span>"+e.attr("title")+"</span>",p+='<span class="pager-tips"></span>',i.find("div.panel-heading").append(p),r.append(p),n(u),r.on("click",t),w(i,l),void k())}function s(a){var t="",n="";return null==a?!1:(t=a.attr("id"),n='<div class="navbar sub-navbar navbar-default row"role="navigation"><div class="navbar-header col-xs-5 col-md-3 pull-left"><a href="##"class="navbar-brand logo-brand"><span class="glyphicon glyphicon-chevron-left back-ico"data-btntype="cancel"id="back-index"></span></a></div><form class="navbar-form navbar-right col-xs-7 col-md-4 row"role="search"><div class="form-group pull-left col-xs-12"><span class="glyphicon glyphicon-search tkd-search"></span><input type="text"data-parentId="'+t+'"class="form-control pull-right input-search"placeholder="搜索卡牌、攻略、规则"></div></form></div>',a.empty(),a.append(n),setTimeout(function(){a.css({"padding-top":a.find("div.sub-navbar").css("height")})},10),a)}function d(a){if(null==a&&a.find("div.loading-cont").length>0)return!1;var t='<div class="loading-cont"><div class="loading-ico"></div></div>';return a.append(t),!0}function o(a){return null==a?!1:(a.find(".loading-cont").remove(),!0)}function c(a){var t=null,n=[],e=[],i="",l="",r=0;if(null==a||""==a)return t;switch(i=a.split("_")[0]){case"package":l=package_title[a];for(name in package_title){if(a==name)break;r++}n=r==package_array.length?Util.arrayReDimensions(package_array):package_array[r],e=drMenu_type_datas.country.slice(1);break;case"country":l=country_title[a];for(name in country_title){if(a==name)break;r++}n=r==heros_array.length?Util.arrayReDimensions(heros_array):heros_array[r],e=drMenu_type_datas["package"].slice(1);break;default:l="莫名武将"}return n.length>0&&(t={title:l,herosDatas:n,herosTypes:e}),t}function p(a,t){var n=[],i=[],l=[],r="",s=0,d="",o=null,p=null;return p=c(a),null==p?!1:(r=p.title,n=p.herosDatas,i=p.herosTypes,s=parseInt(n.length/2),l=u(n.slice(0,s),i.slice(0,s)),d='<div class="items-type" id="items-type" data-cur-name="'+a+'">'+r+"</div>",t.append(d),d='<div class="heros-list"></div>',t.append(d),D({datas:l,$target_dom:t.find(".heros-list"),click_fn:e}),o={datas:n,types:i,allshow:!1},t.find(".heros-list").data("dom-datas",o),!0)}function u(a,t){var n=[],e=null,i=null,l=null;if(0==a.length||0==t.length||a.length!=t.length)return n;for(var r=0,s=a.length;s>r;r++)e=a[r],i=t[r],l={group_name:i.title,id:i.id,array_datas:e},n.push(l);return n}function h(){var a=[],t=[],n=[];if(0==heros_array.length)return a;a=new Array(7);for(var e=0,i=heros_array.length;i>e;e++)if(t=heros_array[e],t.length==PACKAGE_AMOUNT)for(var l=0,r=a.length;r>l;l++)n=a[l],(null==n||0==n.legth)&&(n=[]),n.push(t[l]),a[l]=n;else console.log("索引为"+e+"的国家包异常!");return a}function f(){var a=$(this),t=a.prev("input"),n=a.parents(".navbar").find("#back-index"),e=a.parents(".navbar").find("#search-submit");return""==t.val()?!1:(t.val(""),n.show(),e.hide(),void a.addClass("hidden"))}function v(){var a=$(this),t=a.next(".search-close"),n=a.parents(".navbar").find("#back-index"),e=a.parents(".navbar").find("#search-submit");if(0==a.val().length)n.show(),e.hide(),t.hasClass("hidden")||t.addClass("hidden");else if(n.is(":visible"))return n.hide(),e.show(),t.removeClass("hidden"),!1}function g(){var a=$(this),t="";t=a.prevAll(".form-group").find("input").val(),m(t)}function m(a){var t=[],n=$("#search-info").find("div.search-list"),e=!1,i="";return null==a||""==a?!1:(i=n.data("old-key"),i==a?!1:(search_array.each(function(n,e,i){-1!=e.title.search(new RegExp(a,"i"))&&t.push(e)}),e=n.find("div.loading-cont").length>0?!0:!1,e||(n.data("old-key",a),n.empty(),d(n),t.length>0?setTimeout(function(){o(n),A(t,n)},500):setTimeout(function(){o(n),n.empty(),n.append('<div class="search-tips"><strong>所搜内容为空！</strong></div>')},500)),!0))}function _(){var a=$("#mainmenu"),t=$("#person-info");w(t,a)}function b(){var a=$("#search-info"),t=$(this),n=t.attr("data-parentId"),e=$("#"+n);w(a,e)}function y(){var a=$("body");$toTop=a.find("#backtotop"),$heros_list=null,_dom_datas=null,_scroll_bottom=!1,_has_loading=!1,a.scrollTop()>=150?$toTop.addClass("showme"):$toTop.removeClass("showme"),P.is(":visible")&&($heros_list=P.find("div.heros-list"),_dom_datas=$heros_list.data("dom-datas"),_scroll_bottom=$(document).scrollTop()+50>=$(document).height()-$(window).height()?!0:!1,_has_loading=$heros_list.find("div.loading-cont").length>0?!0:!1,_scroll_bottom&&_dom_datas&&!_dom_datas.allshow&&!_has_loading&&(d($heros_list),setTimeout(function(){var a=[],t=0;t=parseInt(_dom_datas.datas.length/2),a=u(_dom_datas.datas.slice(t),_dom_datas.types.slice(t)),o($heros_list),D({datas:a,$target_dom:$heros_list,is_empty:!1,click_fn:e}),_dom_datas.allshow=!0},1e3)))}function k(){window.scrollTo(0,0)}function w(a,t){if(null==a||null==t)return!1;if(t.hasClass("search-detail"))return t.find("#back-index").trigger("click"),!1;var n=function(){C(a,t)},e=a.find("#back-index");x(a,t),"true"!=a.attr("data-backEvent")?(e.on("click",n),a.attr("data-backEvent","true")):(e.off("click"),e.on("click",n))}function x(a,t){return null==a||null==t?!1:(t.css({"-webkit-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}),t.animate({"margin-left":"-"+t.css("width")},500,function(){var a=$(this);a.hide(),a.css("margin-left","0px")}),a.css({width:a.css("width"),"margin-left":a.css("width")}),a.show(),a.css({"-webkit-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}),void a.animate({"margin-left":"0px"},500,function(){var a=$(this);a.css({"-webkit-transform":"none","-o-transform":"none",transform:"none"}),a.css({width:"100%",position:"relative"})}))}function C(a,t){if(null==a||null==t)return!1;a.find("#back-index");t.css("margin-left","-"+t.css("width")),t.show(),t.css({"-webkit-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}),t.animate({"margin-left":"0px"},500,function(){}),a.css({"-webkit-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}),a.css({width:a.css("width"),position:"fixed"}),a.animate({"margin-left":a.css("width")},500,function(){var a=$(this);a.hide(),a.css({"margin-left":"0px",width:"100%"}),padding_height=t[0].style.paddingTop,setTimeout(function(){t.attr({style:"display: block; padding-top:"+padding_height})},200)})}function T(a){var t="",n="",e="",i=null,l=null,r=null,s=[],d={datas:[],$target_dom:null,click_fn:null};if($.extend(d,a),s=d.datas,l=d.$target_dom,r=d.click_fn,l.empty(),s&&s.length>0){for(var o=0,c=s.length;c>o;o++)i=s[o],i.id&&(e='id="'+i.id+'"'),n='<a href="##" title="'+i.title+'" class="list-group-item list-group-item-warning" '+e+' ><img class="pull-left list-item-img" src="'+i.icon_src+'" alt="'+i.title+'" ><h3 class="list-group-item-heading">'+i.title+'</h3><p class="list-group-item-text">'+i.content+"</p></a>",t+=n;return l.append(t),null!=r&&l.find("a.list-group-item").each(function(a){var t=$(this),n=s[a].data;n&&t.data("item-data",n),t.on("click",r)}),l}return l.html("数据异常！"),l}function A(a,t){function n(a){var t=" ";if(!a)return"未知类型";switch(a){case"rule":t="规则";break;case"sub-card":t="卡牌";break;case"strategy":t="攻略";break;case"heros":t="武将";break;default:t="其他类型"}return t}if(null==a||null==t)return!1;var i,s,d="",o="",c=[],p=null;if(t.empty(),a&&a.length>0){d='<div class="list-group">';for(var u=0,h=a.length;h>u;u++)p=a[u],o="",p.pid&&(i='id="'+p.pid+'"'),s=n(p.pid),o='<div class="item-list" id="search-'+p.pid+'"><a href="##" data-type="'+p.type+'" title="'+p.title+'" class="list-group-item list-group-item-warning" '+i+' ><img class="pull-left list-item-img" src="'+p.icon_src+'" alt="'+p.title+'" ><h3 class="list-group-item-heading">'+p.title+'</h3><p class="list-group-item-text">'+s+"</p></a></div>",c.push(p.data),d+=o;return d+="</div>",t.append(d),t.find("a").each(function(a){var t=$(this),n=t.attr("data-type"),i=c[a];if(i)switch(t.data("item-data",i),n){case"detail":t.on("click",l);break;case"heros-detail":t.on("click",e);break;case"mult-detail":t.on("click",r)}}),t}return t.html("数据异常！"),t}function D(a){var t={datas:[],$target_dom:null,is_empty:!0,click_fn:null},n="",e=null,i=null,l=null;if($.extend(t,a),null==t.datas||0==t.datas.length)return t.$target_dom;t.is_empty&&t.$target_dom&&t.$target_dom.empty();for(var r=0,s=t.datas.length;s>r;r++)i=t.datas[r],i&&i.array_datas&&i.array_datas.length>0&&(n='<div class="str-btn dropup"><div class="btn btn-block btn-lg btn-app">'+i.group_name+'<span class="caret"></span></div><div role="tabpanel" class="list-group tab-pane fade rule active in" id="str_'+i.id+'"></div></div>',e=$(n),t.$target_dom.append(e),T({datas:i.array_datas,$target_dom:e.find("#str_"+i.id),click_fn:t.click_fn}));return l=t.$target_dom.find(".btn-app"),l.off("click"),l.on("click",function(){var a=$(this),t=a.parent();t.hasClass("dropup")?(t.removeClass("dropup"),t.find(".list-group").slideUp()):(t.addClass("dropup"),t.find(".list-group").slideDown())}),t.$target_dom}function q(a,t){var n=null,e="",i=null;if(null==a||0==a.length)return n;e='<ul class="dropdown-menu tkd-dropdown-menu" role="menu" aria-labelledby="class_type">';for(var l=0,r=a.length;r>l;l++)i=a[l],e+='<li role="presentation"><a role="menuitem" tabindex="-1" href="#" id="'+i.id+'">'+i.title+"</a></li>",r>l+1&&(e+='<li role="presentation" class="divider"></li>');return e+="</ul>",n=$(e),t.append(n),U(t),t}function M(a,t){var n=null,e="",i=null,l=[],r="pull-left",s=null;if(null==a||0==a.length)return t;t.empty(),e='<div class="heros-dropdownmenu row"></div>',t.append(e),s=t.find(".heros-dropdownmenu");for(var d=0,o=a.length;o>d;d++)n=a[d],l=n.datas||[],r=d%2==0?"pull-left":"pull-right",l.length>0&&(e='<div class="dropdown '+r+' col-xs-5 col-md-4"><button class="btn btn-pairs btn-lg dropdown-toggle" type="button" id="'+n.id+'" data-toggle="dropdown">'+n.title+'<span class="caret"></span>',i=$(e),q(l,i),s.append(i));return t}function U(a){var t=a.find("li > a");return t.on("click",function(){var a=$(this);switch(_id=this.id,_type=/drmenu/.test(_id)?"drmenu":/country/.test(_id)?"country":"package",$ul_parent=a.parents("div.tab-pane:first"),_type){case"drmenu":E(_id,$ul_parent);break;case"package":case"country":I(_id,$ul_parent);break;default:return!1}}),a}function E(a,t){var n="",e="",i="",l=null,r=null,s=[];if(null==a)return!1;if(n=a.replace("drmenu_",""),i=n+"_all",s=drMenu_type_datas[n],s.length>0){if(l=t.find(".dropdown:eq(1)"),r=t.find("#items-type"),e=r.attr("data-cur-name"),e===i)return!1;l.find("ul").remove(),q(s,l),I(i,t)}return!0}function I(a,t){var n="",i="",l=null,r=null,s=t.find("#items-type"),p=t.find("div.heros-list"),h=[],f=[],v=[],g=0;return i=s.attr("data-cur-name"),i===a?!1:(l=c(a),null==l?!1:(n=l.title,f=l.herosDatas,v=l.herosTypes,s.html(n).attr("data-cur-name",a),_has_loading=p.find("div.loading-cont").length>0?!0:!1,r={datas:f,types:v,allshow:!1},void(_has_loading||(p.empty(),d(p),g=parseInt(f.length/2),h=u(f.slice(0,g),v.slice(0,g)),setTimeout(function(){o(p),D({datas:h,$target_dom:p,is_empty:!0,click_fn:e}),p.data("dom-datas",r)},200)))))}var O=$(window),Q=$("body"),R=$("#mainmenu"),P=$("#heros"),j=$("#rule"),B=$("#card"),G=$("#strategy"),K=$("#search-info"),N=($("#person-info"),$("#rightDocker"));return window.no_support?!1:void a()});